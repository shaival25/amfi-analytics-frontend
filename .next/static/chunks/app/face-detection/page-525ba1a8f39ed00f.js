(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8873],{7089:function(e,a,s){Promise.resolve().then(s.bind(s,6614))},6614:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return N}});var l=s(7437),t=s(2265);s(7948);var n=s(4590),r=s(2498),c=s(8489),i=s(2178),d=s(4353);let m=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(i.fC,{ref:a,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t})});m.displayName=i.fC.displayName,t.forwardRef((e,a)=>{let{className:s,children:n,max:r,total:c,custom:i,countClass:o,...u}=e,x=t.Children.toArray(n);return(0,l.jsxs)("div",{ref:a,className:(0,d.cn)(" relative w-max-content flex -space-x-3 avatarGroup items-center",s),...u,children:[x.slice(0,r).map((e,a)=>(0,l.jsx)(t.Fragment,{children:e},a)),x.length>r&&(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)("div",{className:" inline-block",children:(0,l.jsxs)("span",{className:"ltr:ml-5 rtl:mr-5 inline-block",children:[" +",x.length-r," more"]})}):(0,l.jsx)(m,{className:(0,d.cn)("ring-1 ring-background ring-offset-[2px]  ring-offset-background ",o),children:(0,l.jsxs)(h,{className:"font-normal",children:["+",c||x.length-r]})})})]})}).displayName="AvatarGroup",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(i.Ee,{ref:a,className:(0,d.cn)("aspect-square h-full w-full",s),...t})}).displayName=i.Ee.displayName;let h=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(i.NY,{ref:a,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted font-semibold text-sm",s),...t})});h.displayName=i.NY.displayName;var o=s(3107),u=s(146),x=s(4273),j=s(7907),f=s(8009),p=s(6967),N=()=>{let[e,a]=(0,t.useState)([]),[s,i]=(0,t.useState)([]),d=(0,j.useRouter)(),[h,N]=(0,t.useState)(""),g=e=>{let a=[...s];s.includes(e)?a.splice(s.indexOf(e),1):a.push(e),i(a)},b=async()=>{try{let e=await o.Z.get("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":u.Z.get("authToken")}});200===e.status&&a(e.data)}catch(e){(0,x.Z)(e,d)}},y=async()=>{try{let e=await o.Z.delete("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":u.Z.get("authToken")},data:{selectedRows:s}});200===e.status&&(b(),f.ZP.success("User deleted successfully"))}catch(e){(0,x.Z)(e,d)}};(0,t.useEffect)(()=>{b()},[]);let k=e=>{let a=new Date(e),s=new Date,l=s.getFullYear()-a.getFullYear(),t=s.getMonth()-a.getMonth(),n=s.getDate()-a.getDate();return(t<0||0===t&&n<0)&&l--,l},v=e.map(e=>({fullName:e.fullName,email:e.email,gender:e.gender,city:e.city,state:e.state,contactNumber:e.contactNumber,busName:e.busName,date:e.date,age:k(e.dob)}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:(0,l.jsx)(p.CSVLink,{data:v,headers:[{label:"Name",key:"fullName"},{label:"Email",key:"email"},{label:"Gender",key:"gender"},{label:"City",key:"city"},{label:"State",key:"state"},{label:"Phone Number",key:"contactNumber"},{label:"Bus Name",key:"busName"},{label:"Age",key:"age"},{label:"Date",key:"date"}],filename:h,style:{marginTop:"20px",marginBottom:"0px"},children:(0,l.jsx)(n.z,{className:"btn btn-primary",style:{backgroundColor:"#35C2DB"},onClick:()=>{let e=new Date,a=e.getFullYear(),s=e.getMonth()+1;N("Users_KYC_data_"+e.getDate()+"/"+s+"/"+a+".csv")},children:"Export to CSV"})})}),e&&(0,l.jsxs)(r.iA,{children:[(0,l.jsx)(r.xD,{children:(0,l.jsxs)(r.SC,{children:[localStorage.getItem("userPermissions").includes("bnyGeneral:delete")&&(0,l.jsx)(r.ss,{children:(0,l.jsx)(c.X,{checked:s.length===e.length&&s.length>0||"indeterminate",onCheckedChange:a=>{(null==s?void 0:s.length)===(null==e?void 0:e.length)?i([]):i(e.map(e=>e._id))}})}),(0,l.jsx)(r.ss,{className:"font-semibold",children:s.length===e.length&&s.length>0?(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(n.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>y(),children:"Delete all"})}):s.length>0?(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(n.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>y(),children:"Delete"})}):null}),(0,l.jsx)(r.ss,{children:"Name"}),(0,l.jsx)(r.ss,{children:"Email"}),(0,l.jsx)(r.ss,{children:"Gender"}),(0,l.jsx)(r.ss,{children:"Age"}),(0,l.jsx)(r.ss,{children:"Address"}),(0,l.jsx)(r.ss,{children:"Phone Number"}),(0,l.jsx)(r.ss,{children:"Bus Name"}),(0,l.jsx)(r.ss,{children:"Date"})]})}),(0,l.jsx)(r.RM,{children:null==e?void 0:e.map(e=>(0,l.jsxs)(r.SC,{className:"hover:bg-muted","data-state":s.includes(e._id)&&"selected",children:[(0,l.jsxs)(r.pj,{className:"p-2",children:[" ",(0,l.jsx)(c.X,{checked:s.includes(e._id),onCheckedChange:()=>g(e._id)})]}),(0,l.jsxs)(r.pj,{className:"font-medium text-card-foreground/80 p-2",children:[" ",(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(m,{className:"rounded-full",children:(0,l.jsx)("img",{src:"".concat("https://api.bharatniveshyatra.com").concat(e.image),alt:e.name})}),(0,l.jsx)("span",{className:"text-sm text-card-foreground",children:e.name})]})]}),(0,l.jsx)(r.pj,{className:"p-1",children:e.fullName}),(0,l.jsx)(r.pj,{className:"p-1 email-td text-sm",children:e.email}),(0,l.jsx)(r.pj,{className:"p-1 text-center",children:e.gender}),(0,l.jsx)(r.pj,{className:"p-2",children:k(e.dob)}),(0,l.jsxs)(r.pj,{className:"p-2",children:[e.city,", ",e.state]}),(0,l.jsx)(r.pj,{className:"p-2",children:e.contactNumber}),(0,l.jsx)(r.pj,{className:"p-2",children:e.busName}),(0,l.jsx)(r.pj,{className:"p-2",children:e.date})]},e._id))})]})]})}}},function(e){e.O(0,[6984,1969,8009,8558,2481,8889,2971,8069,1744],function(){return e(e.s=7089)}),_N_E=e.O()}]);