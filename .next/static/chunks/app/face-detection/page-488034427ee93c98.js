(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8873],{7089:function(e,s,a){Promise.resolve().then(a.bind(a,6614))},6614:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var l=a(7437),t=a(2265);a(7948);var n=a(4590),r=a(2498),c=a(8489),i=a(2178),d=a(4353);let h=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(i.fC,{ref:s,className:(0,d.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});h.displayName=i.fC.displayName,t.forwardRef((e,s)=>{let{className:a,children:n,max:r,total:c,custom:i,countClass:o,...u}=e,x=t.Children.toArray(n);return(0,l.jsxs)("div",{ref:s,className:(0,d.cn)(" relative w-max-content flex -space-x-3 avatarGroup items-center",a),...u,children:[x.slice(0,r).map((e,s)=>(0,l.jsx)(t.Fragment,{children:e},s)),x.length>r&&(0,l.jsx)(l.Fragment,{children:i?(0,l.jsx)("div",{className:" inline-block",children:(0,l.jsxs)("span",{className:"ltr:ml-5 rtl:mr-5 inline-block",children:[" +",x.length-r," more"]})}):(0,l.jsx)(h,{className:(0,d.cn)("ring-1 ring-background ring-offset-[2px]  ring-offset-background ",o),children:(0,l.jsxs)(m,{className:"font-normal",children:["+",c||x.length-r]})})})]})}).displayName="AvatarGroup",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(i.Ee,{ref:s,className:(0,d.cn)("aspect-square h-full w-full",a),...t})}).displayName=i.Ee.displayName;let m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)(i.NY,{ref:s,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted font-semibold text-sm",a),...t})});m.displayName=i.NY.displayName;var o=a(3107),u=a(146),x=a(4273),j=a(7907),f=a(8009),p=a(6967),g=()=>{let[e,s]=(0,t.useState)([]),[a,i]=(0,t.useState)([]),d=(0,j.useRouter)(),[m,g]=(0,t.useState)(""),N=e=>{let s=[...a];a.includes(e)?s.splice(a.indexOf(e),1):s.push(e),i(s)},y=async()=>{try{let e=await o.Z.get("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":u.Z.get("authToken")}});200===e.status&&s(e.data)}catch(e){(0,x.Z)(e,d)}},b=async()=>{try{let e=await o.Z.delete("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":u.Z.get("authToken")},data:{selectedRows:a}});200===e.status&&(y(),f.ZP.success("User deleted successfully"))}catch(e){(0,x.Z)(e,d)}};(0,t.useEffect)(()=>{y()},[]);let k=e=>{let s=new Date(e),a=new Date,l=a.getFullYear()-s.getFullYear(),t=a.getMonth()-s.getMonth(),n=a.getDate()-s.getDate();return(t<0||0===t&&n<0)&&l--,l},v=e.map(e=>({fullName:e.fullName,email:e.email,gender:e.gender,city:e.city,state:e.state,contactNumber:e.contactNumber,age:k(e.dob)}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:(0,l.jsx)(p.CSVLink,{data:v,headers:[{label:"Name",key:"fullName"},{label:"Email",key:"email"},{label:"Gender",key:"gender"},{label:"City",key:"city"},{label:"State",key:"state"},{label:"Phone Number",key:"contactNumber"},{label:"Age",key:"age"}],filename:m,style:{marginTop:"20px",marginBottom:"0px"},children:(0,l.jsx)(n.z,{className:"btn btn-primary",style:{backgroundColor:"#35C2DB"},onClick:()=>{let e=new Date,s=e.getFullYear(),a=e.getMonth()+1;console.log(a),g("Users_KYC_data_"+e.getDate()+"/"+a+"/"+s+".csv")},children:"Export to CSV"})})}),e&&(0,l.jsxs)(r.iA,{children:[(0,l.jsx)(r.xD,{children:(0,l.jsxs)(r.SC,{children:[localStorage.getItem("userPermissions").includes("bnyGeneral:delete")&&(0,l.jsx)(r.ss,{children:(0,l.jsx)(c.X,{checked:a.length===e.length&&a.length>0||"indeterminate",onCheckedChange:s=>{(null==a?void 0:a.length)===(null==e?void 0:e.length)?i([]):i(e.map(e=>e._id))}})}),(0,l.jsx)(r.ss,{className:"font-semibold",children:a.length===e.length&&a.length>0?(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(n.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>b(),children:"Delete all"})}):a.length>0?(0,l.jsx)("div",{className:"flex",children:(0,l.jsx)(n.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>b(),children:"Delete"})}):null}),(0,l.jsx)(r.ss,{children:"Name"}),(0,l.jsx)(r.ss,{children:"Email"}),(0,l.jsx)(r.ss,{children:"Gender"}),(0,l.jsx)(r.ss,{children:"Age"}),(0,l.jsx)(r.ss,{children:"Address"}),(0,l.jsx)(r.ss,{children:"Phone Number"}),(0,l.jsx)(r.ss,{children:"Bus Name"}),(0,l.jsx)(r.ss,{children:"Date"})]})}),(0,l.jsx)(r.RM,{children:null==e?void 0:e.map(e=>(0,l.jsxs)(r.SC,{className:"hover:bg-muted","data-state":a.includes(e._id)&&"selected",children:[(0,l.jsxs)(r.pj,{className:"p-2",children:[" ",(0,l.jsx)(c.X,{checked:a.includes(e._id),onCheckedChange:()=>N(e._id)})]}),(0,l.jsxs)(r.pj,{className:"font-medium text-card-foreground/80 p-2",children:[" ",(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(h,{className:"rounded-full",children:(0,l.jsx)("img",{src:"".concat("https://api.bharatniveshyatra.com").concat(e.image),alt:e.name})}),(0,l.jsx)("span",{className:"text-sm text-card-foreground",children:e.name})]})]}),(0,l.jsx)(r.pj,{className:"p-1",children:e.fullName}),(0,l.jsx)(r.pj,{className:"p-1 email-td text-sm",children:e.email}),(0,l.jsx)(r.pj,{className:"p-1 text-center",children:e.gender}),(0,l.jsx)(r.pj,{className:"p-2",children:k(e.dob)}),(0,l.jsxs)(r.pj,{className:"p-2",children:[e.city,", ",e.state]}),(0,l.jsx)(r.pj,{className:"p-2",children:e.contactNumber}),(0,l.jsx)(r.pj,{className:"p-2",children:e.busName}),(0,l.jsx)(r.pj,{className:"p-2",children:e.date})]},e._id))})]})]})}}},function(e){e.O(0,[6984,1969,8009,8558,2481,8889,2971,8069,1744],function(){return e(e.s=7089)}),_N_E=e.O()}]);