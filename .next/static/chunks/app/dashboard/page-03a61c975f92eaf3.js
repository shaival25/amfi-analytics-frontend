(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{1288:function(e,t,a){Promise.resolve().then(a.bind(a,3473))},3473:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return et}});var s=a(7437),r=a(4232),l=a(5559),o=a(1774);let n=[{name:"zinc",label:"Zinc",activeColor:{light:"240 5.9% 10%",dark:"240 5.2% 33.9%"},cssVars:{light:{background:"0 0% 100%",foreground:"240 10% 3.9%",card:"0 0% 100%","card-foreground":"240 10% 3.9%",popover:"0 0% 100%","popover-foreground":"240 10% 3.9%",primary:"240 5.9% 10%","primary-foreground":"0 0% 98%",secondary:"240 4.8% 95.9%","secondary-foreground":"240 5.9% 10%",muted:"240 4.8% 95.9%","muted-foreground":"240 3.8% 46.1%",accent:"240 4.8% 95.9%","accent-foreground":"240 5.9% 10%",destructive:"0 84.2% 60.2%","destructive-foreground":"0 0% 98%",border:"240 5.9% 90%",input:"240 5.9% 90%",ring:"240 5.9% 10%",radius:"0.5rem",warning:"25 95% 53%",success:"142 71% 45%",info:"189 94% 43%",chartGird:"240 5.9% 90%",chartLabel:"240 5.2% 33.9%"},light:{background:"240 10% 3.9%",foreground:"0 0% 98%",card:"240 10% 3.9%","card-foreground":"0 0% 98%",popover:"240 10% 3.9%","popover-foreground":"0 0% 98%",primary:"0 0% 98%","primary-foreground":"240 5.9% 10%",secondary:"240 3.7% 15.9%","secondary-foreground":"0 0% 98%",muted:"240 3.7% 15.9%","muted-foreground":"240 5% 64.9%",accent:"240 3.7% 15.9%","accent-foreground":"0 0% 98%",destructive:"0 62.8% 30.6%","destructive-foreground":"0 0% 98%",border:"240 3.7% 15.9%",input:"240 3.7% 15.9%",ring:"240 4.9% 83.9%",warning:"15.3, 74.6%, 27.8%",success:"143.8 61.2% 20.2%",info:"196.4 63.6% 23.7%",chartGird:"240 5.3% 26.1%",chartLabel:"240 5% 64.9%"}}},{name:"custom",label:"ustom",activeColor:{light:"169 91% 34%",dark:"169 91% 34%"},cssVars:{light:{background:"0 0% 100%",foreground:"169 100% 5%",card:"0 0% 100%","card-foreground":"169 100% 5%",popover:"0 0% 100%","popover-foreground":"169 100% 5%",primary:"169 91% 34%","primary-foreground":"0 0% 98%",secondary:"169 60% 85%","secondary-foreground":"169 91% 34%",muted:"169 60% 85%","muted-foreground":"169 50% 40%",accent:"169 60% 85%","accent-foreground":"169 91% 34%",destructive:"0 84.2% 60.2%","destructive-foreground":"0 0% 98%",border:"169 60% 80%",input:"169 60% 80%",ring:"169 91% 34%",radius:"0.5rem",warning:"25 95% 53%",success:"142 71% 45%",info:"189 94% 43%",chartGird:"169 91% 34%",chartLabel:"0 0% 0%"},dark:{background:"169 100% 5%",foreground:"0 0% 98%",card:"169 100% 5%","card-foreground":"0 0% 98%",popover:"169 100% 5%","popover-foreground":"0 0% 98%",primary:"0 0% 98%","primary-foreground":"169 91% 34%",secondary:"169 50% 20%","secondary-foreground":"0 0% 98%",muted:"169 50% 20%","muted-foreground":"169 40% 60%",accent:"169 50% 20%","accent-foreground":"0 0% 98%",destructive:"0 62.8% 30.6%","destructive-foreground":"0 0% 98%",border:"169 50% 20%",input:"169 50% 20%",ring:"169 50% 80%",warning:"15.3, 74.6%, 27.8%",success:"143.8 61.2% 20.2%",info:"196.4 63.6% 23.7%",chartGird:"169 50% 30%",chartLabel:"169 40% 60%"}}}],d=e=>({labels:c(e)}),i=(e,t)=>({categories:t,labels:c(e),axisBorder:{show:!1},axisTicks:{show:!1}}),c=e=>({style:{colors:e,fontFamily:"Inter"}}),u=e=>({show:!0,borderColor:e,strokeDashArray:10,position:"back"}),m=(0,r.default)(()=>Promise.all([a.e(9562),a.e(981)]).then(a.bind(a,981)),{loadableGenerated:{webpack:()=>[981]},ssr:!1});var f=e=>{let{series:t,chartColor:a,height:r=300,labels:c}=e,{theme:f,setTheme:p}=(0,l.f)(),{theme:h}=(0,o.F)(),x=n.find(e=>e.name===f),b={chart:{toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{curve:"smooth",width:4},colors:[a],tooltip:{theme:"dark"===h?"dark":"light"},grid:u("hsl(".concat(null==x?void 0:x.cssVars["dark"===h?"dark":"light"].chartGird,")")),fill:{type:"gradient",colors:a,gradient:{shadeIntensity:.1,opacityFrom:.4,opacityTo:.1,stops:[50,100,0]}},yaxis:d("hsl(".concat(null==x?void 0:x.cssVars["dark"===h?"dark":"light"].chartLabel,")")),xaxis:i("hsl(".concat(null==x?void 0:x.cssVars["dark"===h?"dark":"light"].chartLabel,")"),c),padding:{top:0,right:0,bottom:0,left:0}};return(0,s.jsx)(m,{options:b,series:t,type:"area",height:r,width:"100%"})},p=a(2265),h=a(4353);let x=p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,h.cn)("rounded-md  bg-card text-card-foreground shadow-sm",a),...r})});x.displayName="Card";let b=p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,h.cn)("flex flex-col space-y-1.5 px-4 py-4 mb-6  border-b border-border ",a),...r})});b.displayName="CardHeader",p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,h.cn)("text-xl  font-medium  leading-none",a),...r})}).displayName="CardTitle",p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,h.cn)("text-sm text-muted-foreground mt-2",a),...r})}).displayName="CardDescription";let g=p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,h.cn)("p-6 pt-0",a),...r})});g.displayName="CardContent",p.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,h.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var y=a(4207),v=e=>{let{setRange:t}=e;return(0,s.jsxs)(y.Ph,{onValueChange:e=>{t(e)},defaultValue:"1",children:[(0,s.jsx)(y.i4,{className:"w-[150px]",children:(0,s.jsx)(y.ki,{placeholder:"Select Range",className:"whitespace-nowrap"})}),(0,s.jsxs)(y.Bw,{children:[(0,s.jsx)(y.Ql,{value:"1",children:"1 Hour"}),(0,s.jsx)(y.Ql,{value:"6",children:"6 Hours"}),(0,s.jsx)(y.Ql,{value:"24",children:"1 Day"}),(0,s.jsx)(y.Ql,{value:"720",children:"1 Month"}),(0,s.jsx)(y.Ql,{value:"8760",children:"1 Year"})]})]})},j=a(3107),w=a(146),N=a(7907),k=a(4273),T=e=>{let{selectedBuses:t}=e,a=(0,N.useRouter)(),[r,o]=(0,p.useState)(1),[d,i]=(0,p.useState)([{name:"users count",data:[]}]),[c,u]=(0,p.useState)([]),m=async e=>{try{let a=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/live-count/").concat(e),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});i([{data:a.data.counts}]),u(a.data.labels)}catch(e){(0,k.Z)(e,a)}};(0,p.useEffect)(()=>{let e=setInterval(()=>{m(r)},1e4);return m(r),()=>clearInterval(e)},[r,t]);let{theme:h,setTheme:y}=(0,l.f)(),T=n.find(e=>e.name===h),S="hsl(".concat(null==T?void 0:T.cssVars.light.primary,")");return(0,s.jsxs)(x,{children:[(0,s.jsx)(b,{className:"border-none pb-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap ",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"text-xl font-semibold text-default-800",children:["Live Visitors Count"," ",(0,s.jsx)("svg",{className:"inline-flex",width:"40",height:"40",children:(0,s.jsx)("circle",{fill:"#ff0000",stroke:"none",cx:"20",cy:"20",r:"8",children:(0,s.jsx)("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"0.1"})})})]})}),(0,s.jsx)("div",{className:"flex-none",children:(0,s.jsx)(v,{range:r,setRange:o})})]})}),(0,s.jsx)(g,{className:"p-1 md:p-5",children:(null==d?void 0:d.length)>0&&(0,s.jsx)(f,{series:d,chartColor:S,labels:c})})]})},S=a(6295);let C=(0,r.default)(()=>Promise.all([a.e(9562),a.e(981)]).then(a.bind(a,981)),{loadableGenerated:{webpack:()=>[981]},ssr:!1});var Z=e=>{let{height:t=250,mascotRank:a}=e,{theme:r,isRtl:d}=(0,l.f)(),{theme:i}=(0,o.F)();n.find(e=>e.name===r);let[c,u]=(0,p.useState)([]),[m,f]=(0,p.useState)({chart:{toolbar:{show:!1}},labels:[],dataLabels:{enabled:!0},tooltip:{theme:"light"},stroke:{width:0},plotOptions:{pie:{expanOnClick:!0,donut:{labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600},value:{show:!0,label:"Total",fontSize:"14px",fontWeight:600},total:{show:!0,label:"Total",fontSize:"16px",fontWeight:600}}}}},legend:{position:"bottom",itemMargin:{horizontal:10,vertical:8},markers:{width:10,height:10,radius:10,offsetX:d?5:-5}},padding:{top:0,right:0,bottom:0,left:0}});return(0,p.useEffect)(()=>{if(a){let e=Object.keys(a).map(e=>a[e]),t=Object.keys(a);u(e),f(e=>({...e,labels:t}))}},[a]),(0,s.jsx)(C,{options:m,series:c,type:"donut",height:t,width:"100%"})};let z=(0,r.default)(()=>Promise.all([a.e(9562),a.e(981)]).then(a.bind(a,981)),{loadableGenerated:{webpack:()=>[981]},ssr:!1});var _=e=>{let{height:t=250,goalsSelected:a}=e,[r,l]=(0,p.useState)([]),[o,n]=(0,p.useState)({chart:{toolbar:{show:!1}},labels:[],dataLabels:{enabled:!0},tooltip:{theme:"light"},stroke:{width:0},plotOptions:{pie:{expanOnClick:!0,donut:{labels:{show:!0,name:{show:!0,fontSize:"14px",fontWeight:600},value:{show:!0,label:"Total",fontSize:"14px",fontWeight:600},total:{show:!0,label:"Total",fontSize:"16px",fontWeight:600}}}}},legend:{position:"bottom",itemMargin:{horizontal:10,vertical:8},markers:{width:10,height:10,radius:10,offsetX:-5}},padding:{top:0,right:0,bottom:0,left:0}});return(0,p.useEffect)(()=>{if(a){let e=Object.keys(a).map(e=>a[e]),t=Object.keys(a);l(e),n(e=>({...e,labels:t}))}},[a]),(0,s.jsx)(z,{options:o,series:r,type:"donut",height:t,width:"100%"})},R=e=>{let{selectedBuses:t}=e,[a,r]=(0,p.useState)(0),[l,o]=(0,p.useState)({}),[n,d]=(0,p.useState)(0),[i,c]=(0,p.useState)(0),[u,m]=(0,p.useState)(0),[f,y]=(0,p.useState)({}),v=(0,N.useRouter)(),T=async()=>{try{let e=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/full-count"),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&e.data!==a&&r(e.data)}catch(e){(0,k.Z)(e,v)}},C=async()=>{try{let e=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/mascot-count"),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&e.data.totalCount!==n&&(o(e.data.cricketer),d(e.data.totalCount))}catch(e){(0,k.Z)(e,v)}},z=async()=>{try{let e=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/person-count"),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&e.data!==i&&c(e.data)}catch(e){(0,k.Z)(e,v)}},R=async()=>{try{let e=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/feedback-count"),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&m(e.data)}catch(e){(0,k.Z)(e,v)}},A=async()=>{try{let e=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/goals-selected"),{selectedBuses:t},{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&y(e.data.goals)}catch(e){(0,k.Z)(e,v)}};return(0,p.useEffect)(()=>{T(),C(),z(),R(),A();let e=setInterval(()=>{T(),C(),z(),R(),A()},1e4);return()=>clearInterval(e)},[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2  border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"Total Visitors"}),(0,s.jsx)("span",{className:(0,h.cn)("flex-none h-9 w-9 flex justify-center items-center bg-default-100 rounded-full"),children:(0,s.jsx)(S.bA,{className:"h-4 w-4"})})]}),(0,s.jsx)(g,{className:"pb-4 px-4",children:(0,s.jsx)("div",{className:"text-2xl font-semibold text-default-900 mb-2.5",children:a})})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2  border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"Total Person Count"}),(0,s.jsx)("span",{className:(0,h.cn)("flex-none h-9 w-9 flex justify-center items-center bg-default-100 rounded-full"),children:(0,s.jsx)(S.bA,{className:"h-4 w-4"})})]}),(0,s.jsx)(g,{className:"pb-4 px-4",children:(0,s.jsx)("div",{className:"text-2xl font-semibold text-default-900 mb-2.5",children:i})})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2  border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"Total Feedback Count"}),(0,s.jsx)("span",{className:(0,h.cn)("flex-none h-9 w-9 flex justify-center items-center bg-default-100 rounded-full"),children:(0,s.jsx)(S.bA,{className:"h-4 w-4"})})]}),(0,s.jsx)(g,{className:"pb-4 px-4",children:(0,s.jsx)("div",{className:"text-2xl font-semibold text-default-900 mb-2.5",children:u})})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2 border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"Cricketer Preference"}),(0,s.jsx)("span",{className:(0,h.cn)("flex-none h-9 w-9 flex justify-center items-center bg-default-100 rounded-full"),children:(0,s.jsx)(S.z_,{className:"h-4 w-4"})})]}),(0,s.jsx)(g,{className:"px-4",children:(0,s.jsx)(Z,{mascotRank:l})})]}),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2 border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"Goals Selected"}),(0,s.jsx)("span",{className:(0,h.cn)("flex-none h-9 w-9 flex justify-center items-center bg-default-100 rounded-full"),children:(0,s.jsx)(S.z_,{className:"h-4 w-4"})})]}),(0,s.jsx)(g,{className:"px-4",children:(0,s.jsx)(_,{goalsSelected:f})})]})]})},A=a(4590),F=e=>{let{setSelectedBuses:t,selectedBuses:a,buses:r}=e,l=e=>{"all"===e?a.includes("all")||t(["all"]):t(t=>{let a=t.filter(e=>"all"!==e);return a.includes(e)?0===(a=a.filter(t=>t!==e)).length?["all"]:a:[...a,e]})};return(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,s.jsx)(A.z,{variant:a.includes("all")?"contained":"outline",color:"info",className:"col-span-1 lg:col-span-1",onClick:()=>l("all"),children:"All Buses"}),r.map(e=>(0,s.jsx)(A.z,{variant:a.includes(e.macAddress)?"contained":"outline",color:"primary",className:"col-span-1 lg:col-span-1",onClick:()=>l(e.macAddress),children:e.busName},e.macAddress))]})},D=a(4602),B=e=>{let{heatMaps:t}=e;return(0,s.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-4",children:null==t?void 0:t.map((e,t)=>(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(D._,{children:e.busName}),(0,s.jsx)("img",{width:300,height:300,src:e.image,alt:"heatMap"}),(0,s.jsxs)("div",{className:"fs-6 text-gray-600",children:[(0,s.jsxs)("span",{children:["Date: ",e.date]}),(0,s.jsxs)("span",{children:["Time: ",e.time]})]})]},t))})},V=a(7562),L=a(6490),O=e=>{let{selectedTimeSlots:t,setSelectedTimeSlots:a}=e,r=Array.from({length:24},(e,t)=>{let a=t.toString().padStart(2,"0")+":00 - "+(t+1).toString().padStart(2,"0")+":00";return{value:a,label:a}});return(0,p.useEffect)(()=>{a(r.reduce((e,t)=>(e[t.value]=!0,e),{}))},[]),(0,s.jsxs)(V.h_,{children:[(0,s.jsx)(V.$F,{asChild:!0,children:(0,s.jsxs)(A.z,{variant:"outline",className:"justify-between gap-3",children:["Time Slot ",(0,s.jsx)(L.Z,{className:"ltr:ml-auto  h-4 w-4"})]})}),(0,s.jsx)(V.AW,{children:(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 px-4",children:r.map(e=>(0,s.jsx)(V.bO,{checked:t[e.value],onCheckedChange:s=>{a({...t,[e.value]:s})},value:e.value,children:e.label},e.value))})})]})},P=a(7427);let E=P.fC,M=P.xz;P.x8,P.Eh;let W=p.forwardRef((e,t)=>{let{className:a,align:r="center",sideOffset:l=4,...o}=e;return(0,s.jsx)(P.h_,{children:(0,s.jsx)(P.VY,{ref:t,align:r,sideOffset:l,className:(0,h.cn)("z-[999] w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});W.displayName=P.VY.displayName;var I=a(5890),G=a(7307),U=a(4719),Q=e=>{let{date:t,setDate:a}=e;return(0,s.jsxs)(E,{children:[(0,s.jsx)(M,{asChild:!0,children:(0,s.jsxs)(A.z,{variant:"outline",className:(0,h.cn)("w-[240px] ltr:pl-3 text-left"),children:[t?(0,I.WU)(t,"PPP"):(0,s.jsx)("span",{children:"Pick a date"}),(0,s.jsx)(G.Z,{className:"ltr:ml-auto  h-4 w-4"})]})}),(0,s.jsx)(W,{children:(0,s.jsx)(U._W,{selected:t,onSelect:a,mode:"single",initialFocus:!0,className:(0,h.cn)("p-0 md:p-3"),classNames:{months:"w-full  space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,h.cn)((0,A.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-2",nav_button_next:"absolute right-2",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"flex-1 text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full gap-1 mt-2",cell:"flex-1 text-center text-sm p-0 relative [&:has([aria-selected])]:bg-primary [&:has([aria-selected])]:rounded-md focus-within:relative focus-within:z-20",day:"w-full h-10 rounded  p-0 font-normal aria-selected:opacity-100 bg-transparent text-current hover:text-primary",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible"}})})]})},Y=a(6136),$=a(1196);Y.kL.register(Y.uw,Y.f$,Y.ZL,Y.Dx,Y.u,Y.De);var H=e=>{let{height:t=350,barData:a}=e,r={labels:null==a?void 0:a.labels,datasets:a.datasets?a.datasets.map((e,t)=>{let a=["#FFC107","#4CAF50","#2196F3","#9C27B0"];return{...e,fill:!1,backgroundColor:a[t%a.length],borderColor:a[t%a.length],borderWidth:2,borderSkipped:"bottom",barThickness:25}}):[]};return(0,s.jsx)("div",{children:(0,s.jsx)($.$Q,{options:{responsive:!0,scales:{y:{grid:{drawTicks:!1,color:"rgba(0, 0, 0, 0)"}},x:{grid:{drawTicks:!1,color:"rgba(0, 0, 0, 0)"}}},maintainAspectRatio:!1},data:r,height:t,width:"100%"})})},J=e=>{let{selectedBuses:t,router:a}=e,[r,l]=(0,p.useState)({}),[o,n]=(0,p.useState)([]),[d,i]=(0,p.useState)(new Date),c=async()=>{try{let e=d.toLocaleDateString("en-CA"),a=Object.keys(o).filter(e=>o[e]),s=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/user-interactions"),{selectedBuses:t,selectedDate:e,selectedTimeSlots:a.map(e=>{let[t,a]=e.split(" - ");return"".concat(t,":00")})},{headers:{"x-auth-token":w.Z.get("authToken")}});!0===s.data.success&&l(s.data.data)}catch(e){(0,k.Z)(e,a)}};return(0,p.useEffect)(()=>{c()},[o,d,t]),(0,s.jsxs)(x,{className:"mb-4",children:[(0,s.jsxs)(b,{className:"flex-col-reverse sm:flex-row flex-wrap gap-2  border-none mb-0 pb-0",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-default-800 flex-1",children:"User Interaction"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(O,{selectedTimeSlots:o,setSelectedTimeSlots:n}),(0,s.jsx)(Q,{date:d,setDate:i})]})]}),(0,s.jsx)(g,{children:(0,s.jsx)(H,{barData:r})})]})};Y.kL.register(Y.uw,Y.f$,Y.ZL,Y.Dx,Y.u,Y.De);var X=e=>{let{height:t=350,barData:a,index:r}=e,{theme:d,setTheme:i}=(0,l.f)(),{theme:c}=(0,o.F)();n.find(e=>e.name===d);let u=["#FFC107","#4CAF50","#2196F3","#9C27B0"],m={labels:null==a?void 0:a.labels,datasets:a.datasets?a.datasets.map(e=>({...e,fill:!1,backgroundColor:u[r%u.length],borderColor:u[r%u.length],borderWidth:2,borderSkipped:"bottom",barThickness:25})):[]};return(0,s.jsx)("div",{children:(0,s.jsx)($.$Q,{options:{responsive:!0,scales:{y:{grid:{drawTicks:!1,color:"rgba(0, 0, 0, 0)"}},x:{grid:{drawTicks:!1,color:"rgba(0, 0, 0, 0)"}}},maintainAspectRatio:!1},data:m,height:t,width:"100%"})})},q=e=>{let{feedbackInsights:t}=e;return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 ",children:Object.keys(t).map((e,a)=>(0,s.jsx)(X,{barData:t[e],index:a},a))})},K=a(8671),ee=a(9706),et=()=>{let[e,t]=(0,p.useState)(["all"]),[a,r]=(0,p.useState)(new Date),[l,o]=(0,p.useState)([]),n=(0,p.useRef)(),[d,i]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),[m,f]=(0,p.useState)([]),[h,y]=(0,p.useState)([]),v=(0,N.useRouter)(),[C,Z]=(0,p.useState)({}),z=async()=>{try{let t=a.toLocaleDateString("en-CA"),s=Object.keys(l).filter(e=>l[e]),r=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/heat-map"),{selectedBuses:e,selectedDate:t,selectedTimeSlots:s.map(e=>{let[t,a]=e.split(" - ");return"".concat(t,":00")})},{headers:{"x-auth-token":w.Z.get("authToken")}});200===r.status&&y(r.data.heatMaps)}catch(e){(0,k.Z)(e,v)}};(0,p.useEffect)(()=>{z()},[e,a,l]);let _=async()=>{try{let t=await j.Z.post("".concat("https://api.bharatniveshyatra.com","/api/analytics/feedback-insights"),{selectedBuses:e},{headers:{"x-auth-token":w.Z.get("authToken")}});200===t.status&&Z(t.data)}catch(e){(0,k.Z)(e,v)}};(0,p.useEffect)(()=>{_()},[e]);let D=async()=>{try{let e=await j.Z.get("".concat("https://api.bharatniveshyatra.com","/api/bus"),{headers:{"x-auth-token":w.Z.get("authToken")}});200===e.status&&f(e.data)}catch(e){(0,k.Z)(e,v)}};(0,p.useEffect)(()=>{D()},[]);let V=(0,K.useReactToPrint)({content:()=>n.current,documentTitle:"Dashboard Report - ".concat((e.includes("all")?["All Buses"]:m.filter(t=>e.includes(t.macAddress)).map(e=>e.busName)).join(", ")," - ").concat(new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}).format(new Date)),copyStyles:!0,pageStyle:"",onBeforePrint:()=>{i(!1)},onAfterPrint:()=>{i(!1),u(!1)}});return(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsxs)("div",{className:"space-y-6",ref:n,children:[d&&(0,s.jsx)("div",{className:"print-logo",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,s.jsx)(S.gA,{height:"100px",width:"500px"})}),(0,s.jsxs)("div",{className:"flex items-center flex-wrap justify-between gap-4",children:[(0,s.jsx)("div",{className:"text-2xl font-medium text-default-800 ",children:"Analytics"}),!d&&(0,s.jsx)(A.z,{onClick:()=>{u(!0),setTimeout(()=>{i(!0)},100),setTimeout(()=>{V()},1001)},className:"btn btn-primary",style:{backgroundColor:"#35C2DB",marginTop:"20px"},children:"Export to PDF"})]}),!d&&(0,s.jsx)(F,{selectedBuses:e,setSelectedBuses:t,buses:m}),(0,s.jsx)("div",{className:"grid grid-cols-1  gap-2 ",children:(0,s.jsx)("div",{className:"col-span-1 lg:col-span-1",children:(0,s.jsx)(T,{selectedBuses:e})})}),(0,s.jsx)("div",{className:"grid grid-cols-3  gap-2 ",children:(0,s.jsx)(R,{selectedBuses:e})}),(0,s.jsx)(J,{selectedBuses:e,router:v}),(0,s.jsxs)(x,{children:[(0,s.jsx)(b,{children:"Feedback Insights"}),(0,s.jsx)(g,{children:(0,s.jsx)(q,{feedbackInsights:C})})]}),(0,s.jsxs)(x,{children:[(0,s.jsx)(b,{className:"border-none pb-0",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap ",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"text-xl font-semibold text-default-800",children:"Heat Maps"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(O,{selectedTimeSlots:l,setSelectedTimeSlots:o}),(0,s.jsx)(Q,{date:a,setDate:r})]})]})}),(0,s.jsx)(g,{className:" mb-2",children:(0,s.jsx)(B,{className:"grid grid-cols-4 gap-2 mt-2",heatMaps:h})})]})]}),c&&(0,s.jsxs)("div",{style:{height:"100%",width:"100%",backdropFilter:"blur(50px)",position:"absolute",top:"0",left:"0",display:"flex",flexDirection:"column",alignItems:"center",paddingTop:"25%",fontWeight:"bold",fontSize:"24px",gap:"20px"},children:["Hang on we are preparing your data",(0,s.jsx)(ee.Z,{color:"#16A34A"})]})]})}},7562:function(e,t,a){"use strict";a.d(t,{$F:function(){return u},AW:function(){return m},Ju:function(){return h},VD:function(){return x},Xi:function(){return f},bO:function(){return p},h_:function(){return c}});var s=a(7437),r=a(2265),l=a(3685),o=a(7805),n=a(9259),d=a(7501),i=a(4353);let c=l.fC,u=l.xz;l.ZA,l.Uv,l.Tr,l.Ee,r.forwardRef((e,t)=>{let{className:a,inset:r,children:n,...d}=e;return(0,s.jsxs)(l.fF,{ref:t,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8 rtl:pr-8",a),...d,children:[n,(0,s.jsx)(o.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=l.fF.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.tu,{ref:t,className:(0,i.cn)("z-[999] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=l.tu.displayName;let m=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...o}=e;return(0,s.jsx)(l.Uv,{children:(0,s.jsx)(l.VY,{ref:t,sideOffset:r,className:(0,i.cn)("z-[999] min-w-[8rem] overflow-hidden rounded-md border  bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});m.displayName=l.VY.displayName;let f=r.forwardRef((e,t)=>{let{className:a,inset:r,...o}=e;return(0,s.jsx)(l.ck,{ref:t,className:(0,i.cn)("relative flex  cursor-default aria-selected:bg-default-200 items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-default-200 focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 ",r&&"ltr:pl-8 rtl:pr-8",a),...o})});f.displayName=l.ck.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,checked:o,...d}=e;return(0,s.jsxs)(l.oC,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 ltr:pl-8 rtl:pr-8  text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:o,...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})}),r]})});p.displayName=l.oC.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(l.Rk,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(d.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=l.Rk.displayName;let h=r.forwardRef((e,t)=>{let{className:a,inset:r,...o}=e;return(0,s.jsx)(l.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...o})});h.displayName=l.__.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-default-200/70",a),...r})});x.displayName=l.Z0.displayName},4207:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return u},Ql:function(){return h},i4:function(){return f},ki:function(){return m}});var s=a(7437),r=a(2265),l=a(9998),o=a(3441),n=a(9259),d=a(7742),i=a(4353);let c=(0,d.j)(" w-full  px-3 h-10 text-sm flex [&>svg]:h-5 [&>svg]:w-5    justify-between items-center  read-only:bg-background  disabled:cursor-not-allowed disabled:opacity-50  transition duration-300 ",{variants:{color:{default:"border-default-300 text-default-500 focus:outline-none focus:border-default-500/50 disabled:bg-default-200  placeholder:text-accent-foreground/50 [&>svg]:stroke-default-600",primary:"border-primary text-primary focus:outline-none focus:border-primary-700 disabled:bg-primary/30 disabled:placeholder:text-primary  placeholder:text-primary/70 [&>svg]:stroke-primary",info:"border-info/50 text-info focus:outline-none focus:border-info-700 disabled:bg-info/30 disabled:placeholder:text-info  placeholder:text-info/70",warning:"border-warning/50 text-warning focus:outline-none focus:border-warning-700 disabled:bg-warning/30 disabled:placeholder:text-info  placeholder:text-warning/70",success:"border-success/50 text-success focus:outline-none focus:border-success-700 disabled:bg-success/30 disabled:placeholder:text-info  placeholder:text-success/70",destructive:"border-destructive/50 text-destructive focus:outline-none focus:border-destructive-700 disabled:bg-destructive/30 disabled:placeholder:text-destructive  placeholder:text-destructive/70"},variant:{flat:"read-only:bg-default-500/10 ",underline:"border-b",bordered:"border",faded:"border border-default-300 read-only:bg-default-100",ghost:"border-0 focus:border","flat-underline":"read-only:bg-default-100 border-b"},shadow:{none:"shadow-none",xs:"shadow-sm",sm:"shadow",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl","2xl":"shadow-2xl"},radius:{none:"rounded-none",sm:"rounded",md:"rounded-lg",lg:"rounded-xl",xl:"rounded-[20px]"},size:{sm:"h-8 text-xs",md:"h-9 text-xs",lg:"h-10 text-sm",xl:"h-12 text-base"}},compoundVariants:[{variant:"flat",color:"primary",className:"read-only:bg-primary/10"},{variant:"flat",color:"info",className:"read-only:bg-info/10"},{variant:"flat",color:"warning",className:"read-only:bg-warning/10"},{variant:"flat",color:"success",className:"read-only:bg-success/10"},{variant:"flat",color:"destructive",className:"read-only:bg-destructive/10"},{variant:"faded",color:"primary",className:"read-only:bg-primary/10 border-primary/30"},{variant:"faded",color:"info",className:"read-only:bg-info/10 border-info/30"},{variant:"faded",color:"warning",className:"read-only:bg-warning/10 border-warning/30"},{variant:"faded",color:"success",className:"read-only:bg-success/10 border-success/30"},{variant:"faded",color:"destructive",className:"read-only:bg-destructive/10 border-destructive/30"}],defaultVariants:{color:"default",size:"lg",variant:"bordered",radius:"md"}}),u=l.fC;l.ZA;let m=l.B4,f=r.forwardRef((e,t)=>{let{className:a,children:r,color:n,size:d,radius:u,variant:m,icon:f=(0,s.jsx)(o.Z,{}),...p}=e;return(0,s.jsxs)(l.xz,{ref:t,className:(0,i.cn)(c({color:n,size:d,radius:u,variant:m}),a),...p,children:[r,(0,s.jsx)(l.JO,{asChild:!0,children:f})]})});f.displayName=l.xz.displayName;let p=r.forwardRef((e,t)=>{let{className:a,children:r,position:o="popper",...n}=e;return(0,s.jsx)(l.h_,{children:(0,s.jsx)(l.VY,{ref:t,className:(0,i.cn)("relative z-[999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o,...n,children:(0,s.jsx)(l.l_,{className:(0,i.cn)("p-1","popper"===o&&" z-[999] h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});p.displayName=l.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.__,{ref:t,className:(0,i.cn)("py-1.5 z-[999] ltr:pl-8 rtl:pr-8 ltr:pr-2 rtl:pl-2 text-sm font-semibold",a),...r})}).displayName=l.__.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(l.ck,{ref:t,className:(0,i.cn)("relative z-[999] flex w-full cursor-default select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,s.jsx)("span",{className:"absolute z-[999] ltr:right-2 rtl:left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(n.Z,{className:"z-[999] h-4 w-4"})})}),(0,s.jsx)(l.eT,{children:r})]})});h.displayName=l.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=l.Z0.displayName},5559:function(e,t,a){"use strict";a.d(t,{A:function(){return n},f:function(){return o}});var s=a(2020);let r={theme:"custom",layout:"vertical",sidebarType:"popover",navbarType:"static",footerType:"static",sidebarBg:"none",radius:.5};var l=a(5249);let o=(0,s.Ue)(e=>({theme:r.theme,setTheme:t=>e({theme:t}),radius:r.radius,setRadius:t=>e({radius:t}),layout:r.layout,setLayout:t=>{e({layout:t}),"semibox"===t&&n.setState({sidebarType:"popover"}),"horizontal"===t&&o.setState({navbarType:"sticky"})},navbarType:r.navbarType,setNavbarType:t=>e({navbarType:t}),footerType:r.footerType,setFooterType:t=>e({footerType:t}),isRtl:!1,setRtl:t=>e({isRtl:t})})),n=(0,s.Ue)((0,l.tJ)(e=>({collapsed:!1,setCollapsed:t=>e({collapsed:t}),sidebarType:"semibox"===r.layout?"popover":r.sidebarType,setSidebarType:t=>{e({sidebarType:t})},subMenu:!1,setSubmenu:t=>e({subMenu:t}),sidebarBg:r.sidebarBg,setSidebarBg:t=>e({sidebarBg:t}),mobileMenu:!1,setMobileMenu:t=>e({mobileMenu:t})}),{name:"sidebar-store",storage:(0,l.FL)(()=>localStorage)}))},4273:function(e,t,a){"use strict";var s=a(146),r=a(8009);t.Z=(e,t)=>{var a,l,o;console.error(e),(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)===401?(s.Z.remove("authToken"),t.push("/error-page/401")):(null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.status)===400?(s.Z.remove("authToken"),t.push("/auth/login")):(null==e?void 0:null===(o=e.response)||void 0===o?void 0:o.status)===500&&r.ZP.error("Something went wrong. Please try again later")}}},function(e){e.O(0,[7674,6984,8286,8529,8009,8558,3871,2353,1959,439,6333,7186,2971,8069,1744],function(){return e(e.s=1288)}),_N_E=e.O()}]);