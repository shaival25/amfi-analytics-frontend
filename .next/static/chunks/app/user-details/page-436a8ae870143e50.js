(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3901],{8878:function(e,t,a){Promise.resolve().then(a.bind(a,8612))},8612:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(7437),s=a(2265);a(7948);var l=a(4590),n=a(2498),c=a(8489),d=a(2178),i=a(4353);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.fC,{ref:t,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});o.displayName=d.fC.displayName,s.forwardRef((e,t)=>{let{className:a,children:l,max:n,total:c,custom:d,countClass:m,...f}=e,h=s.Children.toArray(l);return(0,r.jsxs)("div",{ref:t,className:(0,i.cn)(" relative w-max-content flex -space-x-3 avatarGroup items-center",a),...f,children:[h.slice(0,n).map((e,t)=>(0,r.jsx)(s.Fragment,{children:e},t)),h.length>n&&(0,r.jsx)(r.Fragment,{children:d?(0,r.jsx)("div",{className:" inline-block",children:(0,r.jsxs)("span",{className:"ltr:ml-5 rtl:mr-5 inline-block",children:[" +",h.length-n," more"]})}):(0,r.jsx)(o,{className:(0,i.cn)("ring-1 ring-background ring-offset-[2px]  ring-offset-background ",m),children:(0,r.jsxs)(u,{className:"font-normal",children:["+",c||h.length-n]})})})]})}).displayName="AvatarGroup",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.Ee,{ref:t,className:(0,i.cn)("aspect-square h-full w-full",a),...s})}).displayName=d.Ee.displayName;let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.NY,{ref:t,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted font-semibold text-sm",a),...s})});u.displayName=d.NY.displayName;var m=a(3107),f=a(146),h=a(4273),x=a(7907),g=a(8009);a(6967);var b=a(5958),p=()=>{let[e,t]=(0,s.useState)([]),[a,d]=(0,s.useState)([]),i=(0,x.useRouter)(),[u,p]=(0,s.useState)(""),[j,v]=(0,s.useState)(!1),N=e=>{let t=[...a];a.includes(e)?t.splice(a.indexOf(e),1):t.push(e),d(t)},y=async()=>{try{v(!0);let e=await m.Z.get("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":f.Z.get("authToken")}});200===e.status&&(v(!1),t(e.data))}catch(e){v(!1),(0,h.Z)(e,i)}},w=async()=>{try{let e=await m.Z.delete("".concat("https://api.bharatniveshyatra.com","/api/bnyGeneral"),{headers:{"x-auth-token":f.Z.get("authToken")},data:{selectedRows:a}});200===e.status&&(y(),g.ZP.success("User deleted successfully"))}catch(e){(0,h.Z)(e,i)}};(0,s.useEffect)(()=>{y()},[]);let k=e=>{let t=new Date(e),a=new Date,r=a.getFullYear()-t.getFullYear(),s=a.getMonth()-t.getMonth(),l=a.getDate()-t.getDate();return(s<0||0===s&&l<0)&&r--,r};e.map(e=>({fullName:e.fullName,email:e.email,gender:e.gender,city:e.city,state:e.state,contactNumber:e.contactNumber,busName:e.busName,date:e.date,age:k(e.dob)}));let _=async()=>{v(!0);try{let e=await m.Z.get("".concat("https://api.bharatniveshyatra.com","/downloads/user-data"),{headers:{"x-auth-token":f.Z.get("authToken")},responseType:"blob"});if(200===e.status){let t=new Blob([e.data],{type:e.headers["content-type"]}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a;let s=e.headers["content-disposition"],l=new Date,n=s?s.split("filename=")[1].replace(/['"]/g,"").replace(".xlsx","_".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear(),".xlsx")):"User_Data_".concat(l.getDate(),"-").concat(l.getMonth()+1,"-").concat(l.getFullYear(),".xlsx");r.download=n,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}v(!1)}catch(e){v(!1),alert("Something went wrong, please try again later")}finally{v(!1)}};return(0,r.jsx)(r.Fragment,{children:j?(0,r.jsx)(b.Z,{}):(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"10px"},children:(0,r.jsx)(l.z,{className:"btn btn-primary",style:{backgroundColor:"#35C2DB"},onClick:_,children:"Export to Excel"})}),e&&(0,r.jsxs)(n.iA,{children:[(0,r.jsx)(n.xD,{children:(0,r.jsxs)(n.SC,{children:[localStorage.getItem("userPermissions").includes("bnyGeneral:delete")&&(0,r.jsx)(n.ss,{children:(0,r.jsx)(c.X,{checked:a.length===e.length&&a.length>0||"indeterminate",onCheckedChange:t=>{(null==a?void 0:a.length)===(null==e?void 0:e.length)?d([]):d(e.map(e=>e._id))}})}),(0,r.jsx)(n.ss,{className:"font-semibold",children:a.length===e.length&&a.length>0?(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(l.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>w(),children:"Delete all"})}):a.length>0?(0,r.jsx)("div",{className:"flex",children:(0,r.jsx)(l.z,{size:"xs",variant:"outline",className:"text-xs",color:"destructive",onClick:()=>w(),children:"Delete"})}):null}),(0,r.jsx)(n.ss,{children:"Name"}),(0,r.jsx)(n.ss,{children:"Email"}),(0,r.jsx)(n.ss,{children:"Gender"}),(0,r.jsx)(n.ss,{children:"Age"}),(0,r.jsx)(n.ss,{children:"Address"}),(0,r.jsx)(n.ss,{children:"Phone Number"}),(0,r.jsx)(n.ss,{children:"Bus Name"}),(0,r.jsx)(n.ss,{children:"Date"})]})}),(0,r.jsx)(n.RM,{children:null==e?void 0:e.map(e=>(0,r.jsxs)(n.SC,{className:"hover:bg-muted","data-state":a.includes(e._id)&&"selected",children:[(0,r.jsxs)(n.pj,{className:"p-2",children:[" ",(0,r.jsx)(c.X,{checked:a.includes(e._id),onCheckedChange:()=>N(e._id)})]}),(0,r.jsxs)(n.pj,{className:"font-medium text-card-foreground/80 p-2",children:[" ",(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(o,{className:"rounded-full",children:(0,r.jsx)("img",{src:"".concat("https://api.bharatniveshyatra.com").concat(e.image),alt:e.name})}),(0,r.jsx)("span",{className:"text-sm text-card-foreground",children:e.name})]})]}),(0,r.jsx)(n.pj,{className:"p-1",children:e.fullName}),(0,r.jsx)(n.pj,{className:"p-1 email-td text-sm",children:e.email}),(0,r.jsx)(n.pj,{className:"p-1 text-center",children:e.gender}),(0,r.jsx)(n.pj,{className:"p-2",children:k(e.dob)}),(0,r.jsxs)(n.pj,{className:"p-2",children:[e.city,", ",e.state]}),(0,r.jsx)(n.pj,{className:"p-2",children:e.contactNumber}),(0,r.jsx)(n.pj,{className:"p-2",children:e.busName}),(0,r.jsx)(n.pj,{className:"p-2",children:e.date})]},e._id))})]})]})})}},5958:function(e,t,a){"use strict";var r=a(7437);a(2265);var s=a(6295),l=a(8994);t.Z=()=>(0,r.jsxs)("div",{className:" h-screen flex items-center justify-center flex-col space-y-2",children:[(0,r.jsx)(s.SO,{className:"h-40 w-40 text-primary"}),(0,r.jsxs)("span",{className:" inline-flex gap-1",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]})]})},8489:function(e,t,a){"use strict";a.d(t,{X:function(){return u}});var r=a(7437),s=a(2265),l=a(6969),n=a(7742),c=a(4353),d=a(8033),i=a(9259);let o=(0,n.j)("peer group  shrink-0   ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&_svg]:stroke-primary-foreground ",{variants:{color:{default:"border border-default-400 data-[state=checked]:border-primary data-[state=checked]:bg-primary  ",secondary:"border border-default-300 data-[state=checked]:bg-default-300/90 ",destructive:"border  border-default-400 data-[state=checked]:border-destructive data-[state=checked]:bg-destructive ",warning:"border  border-default-400 data-[state=checked]:border-warning data-[state=checked]:bg-warning ",info:"border  border-default-400 data-[state=checked]:border-info data-[state=checked]:bg-info ",success:"border  border-default-400 data-[state=checked]:border-success data-[state=checked]:bg-success ",dark:"border  border-default-400 data-[state=checked]:bg-slate-900 data-[state=checked]:bg-slate-900 "},variant:{solid:"bg-default-600",plain:" bg-transparent border-none",faded:"bg-card",filled:"bg-default-200",outline:" border border-current data-[state=checked]:bg-card","filled-outline":"bg-default-200 border-current data-[state=checked]:bg-card"},radius:{none:"",sm:"rounded-sm",base:"rounded",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl"},size:{xs:"h-3 w-3 rounded-[2px] [&_svg]:h-2.5 [&_svg]:w-2.5",sm:"h-4 w-4 [&_svg]:h-3 [&_svg]:w-3",md:"h-5 w-5 [&_svg]:h-4 [&_svg]:w-4",lg:"h-6 w-6 [&_svg]:h-4 [&_svg]:w-4",xl:"h-7 w-7 [&_svg]:h-5 [&_svg]:w-5"}},compoundVariants:[{variant:"outline",color:"destructive",className:" [&_svg]:stroke-destructive border-destructive border-destructive"},{variant:"outline",color:"success",className:" [&_svg]:stroke-success border-success"},{variant:"outline",color:"info",className:" [&_svg]:stroke-info border-info"},{variant:"outline",color:"warning",className:" [&_svg]:stroke-warning border-warning"},{variant:"outline",color:"dark",className:" [&_svg]:stroke-foreground border-foreground"},{variant:"outline",color:"default",className:" [&_svg]:stroke-primary border-primary"},{variant:"filled-outline",color:"default",className:"[&_svg]:stroke-primary border-primary"}],defaultVariants:{color:"default",size:"md",radius:"base",variant:"faded"}}),u=s.forwardRef((e,t)=>{let{className:a,color:s,size:n,radius:u,variant:m,children:f,lineThrough:h,icon:x=(0,r.jsx)(i.Z,{}),...g}=e;return(0,r.jsx)(r.Fragment,{children:f?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(l.fC,{ref:t,className:(0,c.cn)(o({color:s,size:n,radius:u,variant:m}),a),...g,children:(0,r.jsx)(l.z$,{className:(0,c.cn)("flex items-center justify-center text-current "),children:x})}),(0,r.jsx)(d._,{htmlFor:g.id,className:(0,c.cn)(" font-normal text-muted-foreground  flex-1 transition-colors-opacity before:transition-width motion-reduce:transition-none ltr:pl-2.5 rtl:pr-2.5 cursor-pointer",{"text-xs":"xs"===n,"text-sm":"sm"===n,"text-base":"md"===n,"text-lg":"lg"===n,"text-lg":"xl"===n,"relative  select-none text-medium inline-flex items-center justify-center before:content-[''] before:absolute before:bg-foreground before:w-0 before:h-0.5 peer-data-[state=checked]:opacity-60 peer-data-[state=checked]:before:w-full ":h}),children:f})]}):(0,r.jsx)(l.fC,{ref:t,className:(0,c.cn)(o({color:s,size:n,radius:u,variant:m}),a),...g,children:(0,r.jsx)(l.z$,{className:(0,c.cn)("flex items-center justify-center text-current "),children:x})})})});u.displayName=l.fC.displayName},8033:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var r=a(7437),s=a(2265),l=a(4602),n=a(7742),c=a(4353);let d=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-50   inline-block "),i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.f,{ref:t,className:(0,c.cn)(d(),a),...s})});i.displayName=l.f.displayName},2498:function(e,t,a){"use strict";a.d(t,{RM:function(){return d},SC:function(){return i},iA:function(){return n},pj:function(){return u},ss:function(){return o},xD:function(){return c}});var r=a(7437),s=a(2265),l=a(4353);let n=s.forwardRef((e,t)=>{let{className:a,wrapperClass:s,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("overflow-x-auto",s),children:(0,r.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-top text-sm ",a),...n})})});n.displayName="Table";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",a),...s})});c.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",a),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,l.cn)(" bg-muted font-medium",a),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,l.cn)("border-b border-default-300 transition-colors  data-[state=selected]:bg-muted",a),...s})});i.displayName="TableRow";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,l.cn)("h-14 px-4  ltr:text-left rtl:text-right ltr:last:text-right rtl:last:text-left align-middle font-semibold  text-sm  text-default-800    capitalize  ltr:[&:has([role=checkbox])]:pr-0 rtl:[&:has([role=checkbox])]:pl-0",a),...s})});o.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle  text-xs text-default-600 last:text-right rtl:last:text-left font-normal  ltr:[&:has([role=checkbox])]:pr-0 rtl:[&:has([role=checkbox])]:pl-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,l.cn)("mb-4 text-sm font-medium text-default-700 text-start",a),...s})}).displayName="TableCaption"},4273:function(e,t,a){"use strict";var r=a(146),s=a(8009);t.Z=(e,t)=>{var a,l,n;console.error(e),(null==e?void 0:null===(a=e.response)||void 0===a?void 0:a.status)===401?(r.Z.remove("authToken"),t.push("/error-page/401")):(null==e?void 0:null===(l=e.response)||void 0===l?void 0:l.status)===400?(r.Z.remove("authToken"),t.push("/auth/login")):(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.status)===500&&s.ZP.error("Something went wrong. Please try again later")}}},function(e){e.O(0,[6984,1969,8009,3107,1272,7186,2971,8069,1744],function(){return e(e.s=8878)}),_N_E=e.O()}]);