(()=>{var e={};e.id=240,e.ids=[240],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4138:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o});var t=a(482),r=a(9108),l=a(2563),i=a.n(l),n=a(8300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let o=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3550)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\users\\page.jsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,4641)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\users\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,2666)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\layout.jsx"],error:[()=>Promise.resolve().then(a.bind(a,826)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\error.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,6178)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\users\\page.jsx"],u="/users/page",x={require:a,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},172:(e,s,a)=>{Promise.resolve().then(a.bind(a,290))},290:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>Z});var t=a(5344),r=a(3729),l=a(4501),i=a(9704),n=a(78),d=a(7588),o=a(7665),c=a(8428),u=a(8014),x=a(2139),h=a(800),m=a(4806),p=a(6519),f=a(3285),g=a(9668);let j=({icon:e,id:s,fetchRoles:a,fetchUserDetails:n})=>{let[d,j]=(0,r.useState)("password"),[v,y]=(0,r.useState)({username:"",email:"",password:"",role:""}),[b,w]=(0,r.useState)([]),N=(0,c.useRouter)(),C=async e=>{try{let s=await o.Z.get(`https://api.bharatniveshyatra.com/api/users/${e}`,{headers:{"x-auth-token":u.Z.get("authToken")}});200===s.status&&(y(s.data),w(await a()))}catch(e){(0,g.Z)(e,N)}},k=async()=>{""===v.password&&delete v.password;try{let e=await o.Z.put(`https://api.bharatniveshyatra.com/api/users/${s}`,v,{headers:{"x-auth-token":u.Z.get("authToken")}});if(200===e.status)return n(),!0;return!1}catch(e){return console.error(e),!1}},[_,P]=(0,r.useState)(1),Z=async()=>{await k()?P(2):P(3)};return(0,t.jsxs)(x.Vq,{children:[t.jsx(x.hg,{onClick:()=>C(s),asChild:!0,children:e}),(0,t.jsxs)(x.cZ,{size:"2xl",className:"p-0",children:[t.jsx(x.fK,{className:"p-6 pb-2",children:(0,t.jsxs)(x.$N,{className:"text-base font-medium",children:[" ","Update User"]})}),t.jsx("div",{className:"max-h-[300px]",children:(0,t.jsxs)(p.x,{className:"h-full px-6",children:[1===_&&(0,t.jsxs)("div",{className:"sm:grid  sm:grid-cols-2 sm:gap-5 space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"User Name"}),t.jsx(h.I,{value:v?.username,onChange:e=>y({...v,username:e.target.value}),type:"text",placeholder:"Enter user name"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Email"}),t.jsx(h.I,{value:v?.email,onChange:e=>y({...v,email:e.target.value}),type:"text",placeholder:"Enter email"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Role"}),(0,t.jsxs)(f.Ph,{onValueChange:e=>y({...v,role:e}),children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:v?.role?.name})}),t.jsx(f.Bw,{children:b?.map(e=>t.jsx(f.Ql,{value:e._id,checked:v?.role?.name===e.name,children:e.name},e._id))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Password"}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[t.jsx(h.I,{type:d,value:v?.password,onChange:e=>y({...v,password:e.target.value}),placeholder:"Enter password",style:{width:"100%"}}),t.jsx("div",{role:"button",onClick:()=>{"text"===d?j("password"):"password"===d&&j("text")},style:{position:"absolute",top:"25%",right:"1%"},children:"password"===d?t.jsx(l.JO,{icon:"heroicons:eye",className:"w-5 h-5 text-default-400"}):t.jsx(l.JO,{icon:"heroicons:eye-slash",className:"w-5 h-5 text-default-400"})})]})]})]}),2===_&&(0,t.jsxs)("div",{className:"flex flex-col items-center ",children:[t.jsx("span",{className:"text-7xl text-success",children:t.jsx(l.JO,{icon:"material-symbols:check-circle-outline"})}),t.jsx("h3",{className:"mt-3 text-success  text-2xl font-semibold",children:"Congratulations"}),t.jsx("p",{className:"mt-4 text-lg font-semibold text-default-600",children:"User Updated"})]}),3===_&&(0,t.jsxs)("div",{className:"flex flex-col items-center ",children:[t.jsx("span",{className:"text-7xl text-danger",children:t.jsx(l.JO,{icon:"material-symbols:error-outline"})}),t.jsx("h3",{className:"mt-3 text-danger text-2xl font-semibold",children:"Error"}),t.jsx("p",{className:"mt-4 text-lg font-semibold text-default-600",children:"Cannot Update User"})]})]})}),(0,t.jsxs)("div",{className:"p-6 pt-4 flex justify-between",children:[t.jsx(x.GG,{onClick:()=>P(1),asChild:!0,children:t.jsx(i.z,{type:"button",color:"warning",children:"Close"})}),1===_&&t.jsx(i.z,{type:"submit",onClick:Z,children:"Submit"})]})]})]})};var v=a(4669);let y=({fetchRoles:e,fetchUserDetails:s,users:a})=>{let[x,h]=(0,r.useState)([]),m=(0,c.useRouter)(),p=e=>{let s=[...x];x.includes(e)?s.splice(x.indexOf(e),1):s.push(e),h(s)},f=async e=>{try{let a=await o.Z.delete(`https://api.bharatniveshyatra.com/api/users/${e}`,{headers:{"x-auth-token":u.Z.get("authToken")}});200===a.status&&(e===localStorage.getItem("userId")&&(u.Z.remove("authToken"),localStorage.clear(),m.push("/auth/login")),v.ZP.success("User deleted successfully"),s())}catch(e){(0,g.Z)(e,m)}};return t.jsx(t.Fragment,{children:a&&(0,t.jsxs)(n.iA,{children:[t.jsx(n.xD,{children:(0,t.jsxs)(n.SC,{children:[t.jsx(n.ss,{children:t.jsx(d.X,{checked:x.length===a.length||"indeterminate",onCheckedChange:e=>{x?.length===a?.length?h([]):h(a.map(e=>e.id))}})}),t.jsx(n.ss,{className:" font-semibold",children:"User Name"}),t.jsx(n.ss,{children:"Email"}),t.jsx(n.ss,{children:"Role"}),t.jsx(n.ss,{children:"Action"})]})}),t.jsx(n.RM,{children:a.map(a=>t.jsx(t.Fragment,{children:a.deleted_at?null:(0,t.jsxs)(n.SC,{className:"hover:bg-muted","data-state":x.includes(a._id)&&"selected",children:[t.jsx(n.pj,{children:t.jsx(d.X,{checked:x.includes(a._id),onCheckedChange:()=>p(a._id)})}),t.jsx(n.pj,{children:a.username}),t.jsx(n.pj,{children:a.email}),t.jsx(n.pj,{children:a.role.name}),t.jsx(n.pj,{className:"flex justify-end",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[localStorage.getItem("userPermissions")?.includes("users:update")&&t.jsx(j,{icon:t.jsx(i.z,{size:"icon",variant:"outline",className:"h-7 w-7",color:"secondary",children:t.jsx(l.JO,{icon:"heroicons:pencil",className:" h-4 w-4"})}),fetchUserDetails:s,fetchRoles:e,id:a._id}),localStorage.getItem("userPermissions").includes("users:delete")&&t.jsx(i.z,{onClick:()=>f(a._id),size:"icon",variant:"outline",className:" h-7 w-7",color:"secondary",children:t.jsx(l.JO,{icon:"heroicons:trash",className:" h-4 w-4"})})]})})]},a._id)}))})]})})};var b=a(1838),w=a(708),N=a(9709),C=a(5453),k=a(9127);let _=N.z.object({email:N.z.string().email({message:"Your email is invalid."}),password:N.z.string().min(4,{message:"Password must of atleast 4 characters."}),username:N.z.string().min(3,{message:"Username must of atleast 3 characters."})}),P=({fetchRoles:e,fetchUserDetails:s})=>{let{register:a,handleSubmit:n,formState:{errors:d}}=(0,w.cI)({resolver:(0,C.F)(_),mode:"all"}),j=(0,c.useRouter)(),[y,N]=(0,r.useState)(""),[P,Z]=(0,r.useState)([]),[z,q]=(0,r.useState)({username:"",email:"",password:"",role:""}),[S,R]=(0,r.useState)("password"),U=async()=>{P.length>0||Z(await e())},D=async()=>{if(N(""),!z.username||!z.email||!z.password||!z.role)return N("All fields are required!"),v.ZP.error("All fields are required!");try{let e=await o.Z.post("https://api.bharatniveshyatra.com/api/users/register",z,{headers:{"x-auth-token":u.Z.get("authToken")}});201===e.status&&(v.ZP.success("User created successfully!"),q({username:"",email:"",password:"",role:""}),s())}catch(e){if(e?.response?.status===409){v.ZP.error(e?.response?.data?.msg),N(e?.response?.data?.msg);return}q({username:"",email:"",password:"",role:""}),(0,g.Z)(e,j)}};return(0,t.jsxs)(x.Vq,{children:[t.jsx(x.hg,{onClick:U,asChild:!0,children:(0,t.jsxs)(i.z,{children:[t.jsx(b.Z,{}),"Add User"]})}),(0,t.jsxs)(x.cZ,{size:"2xl",children:[t.jsx(x.fK,{className:"p-0",children:t.jsx(x.$N,{className:"text-base font-medium text-default-700 ",children:"Create a New User"})}),t.jsx("form",{onSubmit:n(D),children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"h-[250px]",children:(0,t.jsxs)(p.x,{className:"h-full",children:[(0,t.jsxs)("div",{className:"sm:grid  sm:grid-cols-2 sm:gap-5 space-y-4 sm:space-y-0",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"User Name"}),t.jsx(h.I,{...a("username"),value:z.username,onChange:e=>q({...z,username:e.target.value}),className:(0,k.cn)("",{"border-destructive":d.username}),type:"text",placeholder:"Enter user name"}),d.username&&t.jsx("div",{className:" text-destructive",children:d.username.message})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Email Address"}),t.jsx(h.I,{...a("email"),value:z.email,onChange:e=>q({...z,email:e.target.value}),className:(0,k.cn)("",{"border-destructive":d.email}),type:"email",placeholder:"Enter email address"}),d.email&&t.jsx("div",{className:" text-destructive",children:d.email.message})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Enter Password"}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",position:"relative"},children:[t.jsx(h.I,{...a("password"),value:z.password,onChange:e=>q({...z,password:e.target.value}),className:(0,k.cn)("",{"border-destructive":d.password}),type:S,placeholder:"Your password"}),t.jsx("div",{role:"button",onClick:()=>{"text"===S?R("password"):"password"===S&&R("text")},style:{position:"absolute",top:"25%",right:"1%"},children:"password"===S?t.jsx(l.JO,{icon:"heroicons:eye",className:"w-5 h-5 text-default-400"}):t.jsx(l.JO,{icon:"heroicons:eye-slash",className:"w-5 h-5 text-default-400"})})]}),d.password&&t.jsx("div",{className:" text-destructive mt-2",children:d.password.message})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[t.jsx(m._,{children:"Role"}),(0,t.jsxs)(f.Ph,{value:z.role,onValueChange:e=>q({...z,role:e}),placeholder:"Select Role",children:[t.jsx(f.i4,{children:t.jsx(f.ki,{placeholder:"Select Role"})}),t.jsx(f.Bw,{children:P?.map(e=>t.jsx(f.Ql,{value:e._id,children:e.name},e._id))})]})]})]}),y&&t.jsx("div",{className:"text-red-500 mt-3 mb-3  text-center",children:y})]})}),(0,t.jsxs)("div",{className:" flex justify-center gap-3 mt-4",children:[t.jsx(x.GG,{asChild:!0,children:t.jsx(i.z,{type:"button",variant:"outline",children:"Cancel"})}),t.jsx(i.z,{onClick:n(D),children:"Create Account "})]})]})})]})]})},Z=({trans:e})=>{let[s,a]=(0,r.useState)([]),l=(0,c.useRouter)(),i=async()=>{try{let e=await o.Z.get("https://api.bharatniveshyatra.com/api/roles",{headers:{"x-auth-token":u.Z.get("authToken")}});if(200===e.status)return e.data}catch(e){console.error(e)}},n=async()=>{try{let e=await o.Z.get("https://api.bharatniveshyatra.com/api/users",{headers:{"x-auth-token":u.Z.get("authToken")}});200===e.status&&a(e.data)}catch(e){(0,g.Z)(e,l)}};return(0,r.useEffect)(()=>{n()},[]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center flex-wrap justify-between mt-4 gap-4",children:[t.jsx("div",{className:"text-2xl font-medium text-default-800 ",children:"Users"}),localStorage.getItem("userPermissions")?.includes("users:write")&&t.jsx(P,{fetchRoles:i,fetchUserDetails:n})]}),t.jsx(y,{fetchRoles:i,fetchUserDetails:n,trans:e,users:s})]})}},3285:(e,s,a)=>{"use strict";a.d(s,{Bw:()=>m,Ph:()=>u,Ql:()=>p,i4:()=>h,ki:()=>x});var t=a(5344),r=a(3729),l=a(4219),i=a(5390),n=a(2312),d=a(8720),o=a(9127);let c=(0,d.j)(" w-full  px-3 h-10 text-sm flex [&>svg]:h-5 [&>svg]:w-5    justify-between items-center  read-only:bg-background  disabled:cursor-not-allowed disabled:opacity-50  transition duration-300 ",{variants:{color:{default:"border-default-300 text-default-500 focus:outline-none focus:border-default-500/50 disabled:bg-default-200  placeholder:text-accent-foreground/50 [&>svg]:stroke-default-600",primary:"border-primary text-primary focus:outline-none focus:border-primary-700 disabled:bg-primary/30 disabled:placeholder:text-primary  placeholder:text-primary/70 [&>svg]:stroke-primary",info:"border-info/50 text-info focus:outline-none focus:border-info-700 disabled:bg-info/30 disabled:placeholder:text-info  placeholder:text-info/70",warning:"border-warning/50 text-warning focus:outline-none focus:border-warning-700 disabled:bg-warning/30 disabled:placeholder:text-info  placeholder:text-warning/70",success:"border-success/50 text-success focus:outline-none focus:border-success-700 disabled:bg-success/30 disabled:placeholder:text-info  placeholder:text-success/70",destructive:"border-destructive/50 text-destructive focus:outline-none focus:border-destructive-700 disabled:bg-destructive/30 disabled:placeholder:text-destructive  placeholder:text-destructive/70"},variant:{flat:"read-only:bg-default-500/10 ",underline:"border-b",bordered:"border",faded:"border border-default-300 read-only:bg-default-100",ghost:"border-0 focus:border","flat-underline":"read-only:bg-default-100 border-b"},shadow:{none:"shadow-none",xs:"shadow-sm",sm:"shadow",md:"shadow-md",lg:"shadow-lg",xl:"shadow-xl","2xl":"shadow-2xl"},radius:{none:"rounded-none",sm:"rounded",md:"rounded-lg",lg:"rounded-xl",xl:"rounded-[20px]"},size:{sm:"h-8 text-xs",md:"h-9 text-xs",lg:"h-10 text-sm",xl:"h-12 text-base"}},compoundVariants:[{variant:"flat",color:"primary",className:"read-only:bg-primary/10"},{variant:"flat",color:"info",className:"read-only:bg-info/10"},{variant:"flat",color:"warning",className:"read-only:bg-warning/10"},{variant:"flat",color:"success",className:"read-only:bg-success/10"},{variant:"flat",color:"destructive",className:"read-only:bg-destructive/10"},{variant:"faded",color:"primary",className:"read-only:bg-primary/10 border-primary/30"},{variant:"faded",color:"info",className:"read-only:bg-info/10 border-info/30"},{variant:"faded",color:"warning",className:"read-only:bg-warning/10 border-warning/30"},{variant:"faded",color:"success",className:"read-only:bg-success/10 border-success/30"},{variant:"faded",color:"destructive",className:"read-only:bg-destructive/10 border-destructive/30"}],defaultVariants:{color:"default",size:"lg",variant:"bordered",radius:"md"}}),u=l.fC;l.ZA;let x=l.B4,h=r.forwardRef(({className:e,children:s,color:a,size:r,radius:n,variant:d,icon:u=t.jsx(i.Z,{}),...x},h)=>(0,t.jsxs)(l.xz,{ref:h,className:(0,o.cn)(c({color:a,size:r,radius:n,variant:d}),e),...x,children:[s,t.jsx(l.JO,{asChild:!0,children:u})]}));h.displayName=l.xz.displayName;let m=r.forwardRef(({className:e,children:s,position:a="popper",...r},i)=>t.jsx(l.h_,{children:t.jsx(l.VY,{ref:i,className:(0,o.cn)("relative z-[999] min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:t.jsx(l.l_,{className:(0,o.cn)("p-1","popper"===a&&" z-[999] h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})}));m.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.__,{ref:a,className:(0,o.cn)("py-1.5 z-[999] ltr:pl-8 rtl:pr-8 ltr:pr-2 rtl:pl-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let p=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(l.ck,{ref:r,className:(0,o.cn)("relative z-[999] flex w-full cursor-default select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[t.jsx("span",{className:"absolute z-[999] ltr:right-2 rtl:left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(l.wU,{children:t.jsx(n.Z,{className:"z-[999] h-4 w-4"})})}),t.jsx(l.eT,{children:s})]}));p.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},a)=>t.jsx(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},4641:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var t=a(5036),r=a(2213);let l=async({children:e})=>t.jsx(r.ZP,{children:e})},3550:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(5036);let r=(0,a(6843).createProxy)(String.raw`D:\Cactus-Creatives\amfi-bny\analytics-frontend\DashTail-starter-v1.3.0\dash-tail-starter-kit\app\users\page-view.jsx`),{__esModule:l,$$typeof:i}=r,n=r.default,d=async()=>t.jsx(n,{})}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[638,643,397,606,681,617,267,150,290,319,609],()=>a(4138));module.exports=t})();