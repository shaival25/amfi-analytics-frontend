(()=>{var e={};e.id=550,e.ids=[550],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},5044:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o});var a=t(482),r=t(9108),i=t(2563),n=t.n(i),l=t(8300),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o=["",{children:["roles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9852)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\roles\\page.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7067)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\roles\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2666)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\layout.jsx"],error:[()=>Promise.resolve().then(t.bind(t,826)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\error.js"],"not-found":[()=>Promise.resolve().then(t.bind(t,6178)),"D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Cactus-Creatives\\amfi-bny\\analytics-frontend\\DashTail-starter-v1.3.0\\dash-tail-starter-kit\\app\\roles\\page.jsx"],u="/roles/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/roles/page",pathname:"/roles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9265:(e,s,t)=>{Promise.resolve().then(t.bind(t,1664))},1664:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(5344),r=t(7665),i=t(8014),n=t(8428),l=t(3729),c=t(4669),o=t(4501),d=t(9704),u=t(78),h=t(7588),p=t(2139),x=t(800),m=t(4806),f=t(5222),j=t(1405),g=t(8462),y=t(3183),b=t(2062),v=t(3085),k=t(2409),w="Switch",[C,P]=(0,g.b)(w),[N,_]=C(w),R=l.forwardRef((e,s)=>{let{__scopeSwitch:t,name:r,checked:i,defaultChecked:n,required:c,disabled:o,value:d="on",onCheckedChange:u,...h}=e,[p,x]=l.useState(null),m=(0,j.e)(s,e=>x(e)),g=l.useRef(!1),b=!p||!!p.closest("form"),[v=!1,w]=(0,y.T)({prop:i,defaultProp:n,onChange:u});return(0,a.jsxs)(N,{scope:t,checked:v,disabled:o,children:[(0,a.jsx)(k.WV.button,{type:"button",role:"switch","aria-checked":v,"aria-required":c,"data-state":D(v),"data-disabled":o?"":void 0,disabled:o,value:d,...h,ref:m,onClick:(0,f.M)(e.onClick,e=>{w(e=>!e),b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),b&&(0,a.jsx)(S,{control:p,bubbles:!g.current,name:r,value:d,checked:v,required:c,disabled:o,style:{transform:"translateX(-100%)"}})]})});R.displayName=w;var Z="SwitchThumb",q=l.forwardRef((e,s)=>{let{__scopeSwitch:t,...r}=e,i=_(Z,t);return(0,a.jsx)(k.WV.span,{"data-state":D(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});q.displayName=Z;var S=e=>{let{control:s,checked:t,bubbles:r=!0,...i}=e,n=l.useRef(null),c=(0,b.D)(t),o=(0,v.t)(s);return l.useEffect(()=>{let e=n.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&s){let a=new Event("click",{bubbles:r});s.call(e,t),e.dispatchEvent(a)}},[c,t,r]),(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...i,tabIndex:-1,ref:n,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function D(e){return e?"checked":"unchecked"}var $=t(8720),T=t(9127);let A=(0,$.j)("peer relative  inline-flex items-center  [&_.content-box>svg]:h-4  [&_.content-box>svg]:w-4  [&_.content-box]:text-primary-foreground [&_.content-box]:text-[10px] justify-start group  flex-shrink-0  cursor-pointer rounded-full  transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=unchecked]:bg-default-300",{variants:{color:{primary:"data-[state=checked]:bg-primary ",secondary:"data-[state=checked]:bg-secondary ",info:"data-[state=checked]:bg-info ",warning:"data-[state=checked]:bg-warning ",success:"data-[state=checked]:bg-success ",destructive:"data-[state=checked]:bg-destructive ",dark:"data-[state=checked]:bg-foreground "},size:{sm:"h-4 w-[30px]  [&_.content-box]:text-[7px] [&_.content-box>svg]:h-2.5  [&_.content-box>svg]:w-2.5 ",md:"h-5 w-[38px] ",lg:"h-6 w-[42px]"}},defaultVariants:{color:"primary",size:"md"}}),z=l.forwardRef(({className:e,size:s,color:t,startContent:r,endContent:i,thumbClass:n,thumbIcon:l,...c},o)=>(0,a.jsxs)(R,{className:(0,T.cn)(A({size:s,color:t}),e),...c,ref:o,children:[r&&a.jsx("span",{className:"absolute left-1  content-box   text-medium opacity-0 scale-50 transition-transform-opacity group-data-[state=checked]:scale-100 group-data-[state=checked]:opacity-100 ",children:r}),a.jsx(q,{className:(0,T.cn)("pointer-events-none z-10 origin-right  h-4 w-4 rounded-full bg-background  shadow-lg ring-0 transition-all  flex items-center justify-center   ltr:data-[state=checked]:ml-5 rtl:data-[state=checked]:mr-5 rtl:data-[state=unchecked]:mr-0.5 ",n,{"h-3 w-3 data-[state=checked]:ml-4 ":"sm"===s,"h-4 w-4 ":"md"===s,"h-5 w-5 ":"lg"===s}),children:l||null}),i&&a.jsx("span",{className:"z-0  content-box   absolute right-1  text-medium opacity-100 transition-transform-opacity group-data-[state=checked]:translate-x-3 group-data-[state=checked]:opacity-0  ",children:i})]}));z.displayName=R.displayName;var E=t(9668);let G=({icon:e,fetchAllRoles:s,id:t})=>{let[o,h]=(0,l.useState)({rolename:"",permissions:{}}),[f,j]=(0,l.useState)([]),[g,y]=(0,l.useState)([]),b=(0,n.useRouter)();(0,l.useEffect)(()=>{(async()=>{await v(t),await k()})()},[t]);let v=async e=>{try{let s=await r.Z.get(`https://192.168.1.12:5002/api/roles/${e}`,{headers:{"x-auth-token":i.Z.get("authToken")}});h(s.data)}catch(e){console.error("Error fetching role:",e)}},k=async()=>{try{let e=await r.Z.get("https://192.168.1.12:5002/api/permissions",{headers:{"x-auth-token":i.Z.get("authToken")}});if(200===e.status){let s=e.data.permissions;j(s),y([...new Set(Object.keys(s).map(e=>e.split(":")[0]))])}}catch(e){console.error("Error fetching permissions:",e)}},w=(e,s)=>{h(t=>{let a;let r=t.permissions[e]||[];return a=r.some(e=>e.name.includes(s))?r.filter(e=>!e.name.includes(s)):[...r,{name:`${e}:${s}`}],{...t,permissions:{...t.permissions,[e]:a}}})},C=async()=>{try{await r.Z.put(`https://192.168.1.12:5002/api/roles/${t}`,o,{headers:{"x-auth-token":i.Z.get("authToken")}}),c.ZP.success("Role updated successfully"),s()}catch(e){(0,E.Z)(e,b)}};return(0,a.jsxs)(p.Vq,{children:[a.jsx(p.hg,{onClick:()=>{v(t),k()},asChild:!0,children:e}),(0,a.jsxs)(p.cZ,{size:"5xl",className:"p-0",children:[a.jsx(p.fK,{className:"p-6 pb-2",children:a.jsx(p.$N,{className:"text-base font-medium",children:"Update Roles"})}),(0,a.jsxs)("div",{className:"max-h-full px-6",children:[a.jsx("div",{className:"sm:grid sm:grid-cols-1 sm:gap-5 space-y-4 sm:space-y-0",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx(m._,{children:"Role Name"}),a.jsx(x.I,{value:o?.rolename||"",onChange:e=>h({...o,rolename:e.target.value}),type:"text",placeholder:"Enter role name"})]})}),(0,a.jsxs)(u.iA,{children:[a.jsx(u.xD,{children:(0,a.jsxs)(u.SC,{children:[a.jsx(u.ss,{children:"Permissions"}),a.jsx(u.ss,{children:"Read"}),a.jsx(u.ss,{children:"Write"}),a.jsx(u.ss,{children:"Update"}),a.jsx(u.ss,{children:"Delete"})]})}),a.jsx(u.RM,{children:g.map(e=>(0,a.jsxs)(u.SC,{children:[a.jsx(u.pj,{children:e}),["read","write","update","delete"].map(s=>{let t=!f[e].some(t=>t.name.startsWith(e)&&t.name.endsWith(s)),r=o.permissions[e]?.some(t=>t.name===`${e}:${s}`);return a.jsx(u.pj,{children:a.jsx(z,{checked:r,onClick:()=>w(e,s),disabled:t})},s)})]},e))})]})]}),(0,a.jsxs)("div",{className:"p-6 pt-4 flex justify-between",children:[a.jsx(p.GG,{asChild:!0,children:a.jsx(d.z,{type:"button",color:"warning",children:"Close"})}),a.jsx(d.z,{type:"submit",onClick:C,children:"Submit"})]})]})]})},M=({fetchAllRoles:e,roles:s,fetchAllPermissions:t})=>{let[p,x]=(0,l.useState)([]),m=(0,n.useRouter)(),f=e=>{let s=[...p];p.includes(e)?s.splice(p.indexOf(e),1):s.push(e),x(s)},j=async s=>{try{let t=await r.Z.delete(`https://192.168.1.12:5002/api/roles/${s}`,{headers:{"x-auth-token":i.Z.get("authToken")}});200===t.status&&(c.ZP.success("Role deleted successfully"),e())}catch(e){409===e.response.status&&c.ZP.error("User exists in this role!"),(0,E.Z)(e,m)}};return a.jsx(a.Fragment,{children:s&&(0,a.jsxs)(u.iA,{children:[a.jsx(u.xD,{children:(0,a.jsxs)(u.SC,{children:[a.jsx(u.ss,{children:a.jsx(h.X,{checked:p.length===s.length||"indeterminate",onCheckedChange:()=>{p?.length===s?.length?x([]):x(s.map(e=>e.id))}})}),a.jsx(u.ss,{className:" font-semibold",children:"Role Name"}),a.jsx(u.ss,{children:"Permissions"}),a.jsx(u.ss,{children:"Action"})]})}),a.jsx(u.RM,{children:s.map(s=>a.jsx(a.Fragment,{children:s.deleted_at?null:(0,a.jsxs)(u.SC,{className:"hover:bg-muted","data-state":p.includes(s._id)&&"selected",children:[a.jsx(u.pj,{children:a.jsx(h.X,{checked:p.includes(s._id),onCheckedChange:()=>f(s._id)})}),a.jsx(u.pj,{children:s.name.charAt(0).toUpperCase()+s.name.slice(1)}),a.jsx(u.pj,{children:s.permissions.map(e=>e.name).join(", ")}),a.jsx(u.pj,{className:"flex justify-end",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[localStorage.getItem("userPermissions")?.includes("roles:update")&&a.jsx(G,{icon:a.jsx(d.z,{size:"icon",variant:"outline",className:"h-7 w-7",color:"secondary",children:a.jsx(o.JO,{icon:"heroicons:pencil",className:" h-4 w-4"})}),fetchAllRoles:e,id:s._id,fetchAllPermissions:t}),localStorage.getItem("userPermissions").includes("roles:delete")&&a.jsx(d.z,{onClick:()=>j(s._id),size:"icon",variant:"outline",className:" h-7 w-7",color:"secondary",children:a.jsx(o.JO,{icon:"heroicons:trash",className:" h-4 w-4"})})]})})]},s._id)}))})]})})};var O=t(1838);let I=({fetchAllRoles:e,fetchAllPermissions:s})=>{let[t,o]=(0,l.useState)({name:"",permissions:{}}),[h,f]=(0,l.useState)([]),[j,g]=(0,l.useState)([]),y=(0,n.useRouter)();(0,l.useEffect)(()=>{(async()=>{let e=await s();f(e),g([...new Set(Object.keys(e).map(e=>e.split(":")[0]))])})()},[s]);let b=(e,s)=>h[e].some(t=>t.name===`${e}:${s}`),v=(e,s)=>t.permissions[e]?.includes(`${e}:${s}`)||!1,k=(e,s)=>{o(t=>{let a;let r=t.permissions[e]||[];return a=r.includes(`${e}:${s}`)?r.filter(t=>t!==`${e}:${s}`):[...r,`${e}:${s}`],{...t,permissions:{...t.permissions,[e]:a}}})},w=async()=>{if(!t.name){c.ZP.error("Please enter a role name!");return}if(0===Object.keys(t.permissions).length){c.ZP.error("Please select at least one permission!");return}try{await r.Z.post("https://192.168.1.12:5002/api/roles",t,{headers:{"x-auth-token":i.Z.get("authToken")}}),c.ZP.success("Role added successfully!"),e(),o({name:"",permissions:{}})}catch(e){if(e?.response?.status===409){c.ZP.error(e?.response?.data?.msg);return}o({name:"",permissions:{}}),(0,E.Z)(e,y)}};return(0,a.jsxs)(p.Vq,{children:[a.jsx(p.hg,{asChild:!0,children:(0,a.jsxs)(d.z,{children:[a.jsx(O.Z,{}),"Add Role"]})}),(0,a.jsxs)(p.cZ,{size:"5xl",className:"p-0",children:[a.jsx(p.fK,{className:"p-6 pb-2",children:a.jsx(p.$N,{className:"text-base font-medium",children:"Add New Role"})}),(0,a.jsxs)("div",{className:"max-h-full px-6",children:[a.jsx("div",{className:"sm:grid sm:grid-cols-1 sm:gap-5 space-y-4 sm:space-y-0",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[a.jsx(m._,{children:"Role Name"}),a.jsx(x.I,{value:t?.name||"",onChange:e=>o({...t,name:e.target.value}),type:"text",placeholder:"Enter role name"})]})}),(0,a.jsxs)(u.iA,{className:"text-left",children:[a.jsx(u.xD,{children:(0,a.jsxs)(u.SC,{children:[a.jsx(u.ss,{children:"Permissions"}),a.jsx(u.ss,{children:"Read"}),a.jsx(u.ss,{children:"Write"}),a.jsx(u.ss,{children:"Update"}),a.jsx(u.ss,{children:"Delete"})]})}),a.jsx(u.RM,{children:j.map(e=>(0,a.jsxs)(u.SC,{children:[a.jsx(u.pj,{children:e}),["read","write","update","delete"].map(s=>{let t=!b(e,s),r=v(e,s);return a.jsx(u.pj,{className:"last:text-left",children:a.jsx(z,{checked:r,onClick:()=>k(e,s),disabled:t})},s)})]},e))})]})]}),(0,a.jsxs)("div",{className:"p-6 pt-4 flex justify-between",children:[a.jsx(p.GG,{asChild:!0,children:a.jsx(d.z,{type:"button",color:"warning",children:"Close"})}),a.jsx(d.z,{type:"submit",onClick:w,children:"Submit"})]})]})]})},W=({trans:e})=>{let[s,t]=(0,l.useState)([]),c=(0,n.useRouter)(),o=async()=>{try{let e=await r.Z.get("https://192.168.1.12:5002/api/permissions",{headers:{"x-auth-token":i.Z.get("authToken")}});if(200===e.status)return e.data.permissions}catch(e){console.error(e)}},d=async()=>{try{let e=await r.Z.get("https://192.168.1.12:5002/api/roles",{headers:{"x-auth-token":i.Z.get("authToken")}});200===e.status&&t(e.data)}catch(e){(0,E.Z)(e,c)}};return(0,l.useEffect)(()=>{d()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap justify-between mt-4 gap-4",children:[a.jsx("div",{className:"text-2xl font-medium text-default-800 ",children:"Roles"}),localStorage.getItem("userPermissions")?.includes("roles:write")&&a.jsx(I,{fetchAllRoles:d,fetchAllPermissions:o})]}),a.jsx(M,{fetchAllRoles:d,trans:e,roles:s,fetchAllPermissions:o})]})}},7067:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5036),r=t(2213);let i=async({children:e})=>a.jsx(r.ZP,{children:e})},9852:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5036);let r=(0,t(6843).createProxy)(String.raw`D:\Cactus-Creatives\amfi-bny\analytics-frontend\DashTail-starter-v1.3.0\dash-tail-starter-kit\app\roles\page-view.jsx`),{__esModule:i,$$typeof:n}=r,l=r.default,c=async({})=>a.jsx(l,{})},4217:(e,s,t)=>{"use strict";t.d(s,{f:()=>l});var a=t(3729),r=t(2409),i=t(5344),n=a.forwardRef((e,s)=>(0,i.jsx)(r.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=n}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[638,643,397,606,681,141,290,319,609],()=>t(5044));module.exports=a})();